---

copyright:
  years: 2015, 2016

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen:.screen}
{:codeblock:.codeblock}

# Insights for Weather REST API 사용
{: #rest_apis}

*마지막 업데이트 날짜: 2016년 4월 6일*

[Insights for Weather REST API](https://twcservice.{APPDomain}/rest-api/){:new_window}를 사용하여
기상 데이터를 검색할 수 있습니다. API 연산을 테스트하고 즉시 결과를 봄으로써 신속하게 애플리케이션을 빌드하는 데 도움을 받을 수 있습니다. 

각 연산에 대한 세부사항을 보려면 참조 문서에서 **연산 나열**을 클릭하십시오.
매개변수를 지정하고 **사용해 보십시오!**를
클릭하면 신임 정보를 제공하라는 요청을 받게 됩니다. `VCAP_SERVICES` 환경 변수의 사용자 이름과 비밀번호를 제공해야 합니다.
애플리케이션을 열고 목차에서 **환경 변수**를 클릭하면 이 정보를 찾을 수 있습니다.

**참고:** 각 지역은 독립적입니다. 한 지역에서 사용자에게
프로비저닝된 서비스 신임 정보를 사용하여 다른 지역의 서비스에 대해 인증할 수 없습니다.
적절한 신임 정보를 입력하지 않으면 응답 본문에 "권한 없음" 메시지가 포함됩니다. 

Insights for Weather API에서는 위도 및 경도 좌표로서 위치정보를 제공하여 기상 데이터를 검색할 수 있습니다.
사용할 수 있는 API는 다음과 같습니다.

|**API**                                  |**설명**              |
|-----------------------------------------|-----------------------------|
|`GET /v2/forecast/daily/10day`           |위치정보에 대해 당일과 향후 9일 동안의 기상 예보를 리턴합니다. 각 일간 예보에는 주간 예보와 야간 예보가 포함될 수 있습니다. 이들 세그먼트는 JSON 응답에서 별도 오브젝트입니다. 일간 예보의 주간 예보 데이터는 3:00 PM 현지 시간 이후에는 더 이상 사용될 수 없습니다. 현지 시간 오후 3시에는 애플리케이션이 주간 예보를 더 이상 표시하지 않아야 합니다.|
|`GET /v2/forecast/hourly/24hour`         |위치정보에 대해 당일과 향후 24일 동안의 시간별 예보를 리턴합니다. 시간별 예보 데이터에는 각 위치에 대해 최대 24시간 동안의 시간별 예보가 포함될 수 있습니다. 새 데이터를 수신할 때는 위치에 대한 이전의 시간별 예보를 모두 버려야 합니다. |
|`GET /v2/observations/current`           |위치정보에 대한 현재 기상 상태를 리턴합니다. 이 최신 관측치는 특정 리포팅 스테이션에서 최대 10분 동안 데이터베이스에 보관되며 스테이션마다 24시간 관측됩니다. 최신 관측 데이터는 계속하여 업데이트되며 관측 날짜/시간 스탬프를 기반으로 선입선출(FIFO) 방법론(최신 관측으로 데이터를 순환하고 가장 오래된 관측을 아카이브 스토리지로 이동함)을 사용하여 교체됩니다.|
|`GET /v2/observations/timeseries/24hour` |위치정보에 대해 현재 관측 및 현재 날짜와 시간에서 최대 24시간까지의 과거 관측을 모두 리턴합니다. 기상 관측은 전세계에 배치된 실제 디바이스와 현재 기상 관측으로부터 수집됩니다.|
*표 1. Insights for Weather API 요약*

## 시계열 관측
{: #time_series}

시계열 기상 관측 데이터는 기온,
강우량, 바람, 기압, 시계, 자외선과
관측 스테이션, 관측, 날짜/시간,
기상 아이콘 코드 및 문구를 포함하여 기타 관련된
관측 요소를 제공합니다. 시계열 관측과 현재 관측의 차이점은
하나 이상의 관측 데이터 세트를 리턴하는 관측 기간입니다. 

현재 상태는 시간 매개변수 없이 요청한
해당 위치의 최신 관측입니다. 하나의 데이터 세트가 리턴됩니다.
시계열 관측에는 요청한 위치에 대해 최근 24시간을 포함하여
최대 24시간까지 발생한 지난 관측이 포함됩니다. 

특정 리포팅 스테이션에서 관측된 최신 관측치는
최대 48시간(2일) 동안 기본 데이터베이스에 보유됩니다.
최신 관측 데이터는 계속하여 업데이트되며 관측
날짜/시간 스탬프를 기반으로 선입선출(FIFO) 방법론(최신 관측으로
데이터를 순환하고 가장 오래된 관측을 아카이브 스토리지로 이동함)을
사용하여 교체됩니다. 보유되어 임의 스테이션에서 사용 가능한 데이터의
양은 24개 이상의 개별 관측 보고서일 수 있습니다. 관측의 수는 관측 유형으로
결정됩니다.

## URL 구성
{: #url_construction}

Insights for Weather API는 공통 URL 구조 및 쿼리 매개변수를 사용하여 기상 데이터를 요청하고 필터링합니다.
Insights for Weather API에 전달되는 URL은 다음과 같이 구성됩니다. 

```
https://twcservice.mybluemix.net/api/weather/v2/<product group>/&format={format type}&geocode={latitude,longitude}&language={language code}&units={units code}

```

|**속성**     |**설명**                                    |
|------------------|---------------------------------------------------|
|`hostname`     |호스팅되는 URL 경로(예: `https://twcservice.mybluemix.net:443/api/weather`)|
|`버전`         |현재 반복(예: "v2")|
|`제품 그룹`    |제품(예: "관측" 또는 "예보")|
|`지오코드`     |선택적 위도 및 경도(예: "45.4214,75.6919"는 캐나다 오타와를 표시함). 지오코드 좌표를 제공하면 API가 사용 가능한 가장 근접한 위치의 데이터를 리턴합니다. 마침표는 소수점 구분 기호로 사용되고, 쉼표는 위도와 경도 값을 구분하기 위해 사용됩니다. 지오코드를 제공하면 사용되는 실제 위도 및 경도 값이 응답의 메타데이터로 리턴됩니다.|
|`언어`         |응답을 리턴하는 언어. 기본값은 en-US입니다. 기본값 또는 요청한 변환 언어가 응답의 메타데이터에 언어 매개변수로 리턴됩니다.|
|`단위`         |응답을 리턴하는 선택적 단위. API는 English(e), Metric(m) 및 UK-Hybrid(h) 측정 단위를 지원합니다. 측정 단위를 제공하고 값은 제공하지 않으면 API가 언어 코드에 해당하는 측정 단위로 데이터를 리턴합니다. 기본값 또는 요청한 측정 단위가 응답의 메타데이터에 단위 매개변수로 리턴됩니다.|
*표 2. URL 세부사항*

## 측정 단위
{: #units_measure}

Insights for Weather API를 사용하는 경우에는 측정 단위를 명시적으로 전달할 필요가 없습니다. Insights for Weather API는 URL의 언어 코드와 연관된 측정 단위를 기본값으로 사용합니다. 그러나 기본값과는 다른 측정 단위를 제공하려는 경우 기본값을 대체하는 측정 단위를 전달할 수 있습니다.

* en-US 또는 en의 경우 측정 코드의 기본 단위는 English/Imperial입니다. 단위 코드는 "e"입니다. 
* en-GB의 경우 기본 측정 단위는 Hybrid-UK입니다. 단위 코드는 "h"입니다. 
* 다른 모든 것의 경우 기본 측정 단위는 Metric입니다. 단위 코드는 "m"입니다. 

## 언어 변환
{: #language_translation}

Insights for Weather API는 문구와 측정 단위를 변환합니다. 요청 URL을 형식화할 때 올바른 언어를 제공해야 합니다.
변환되는 필드는 다음과 같습니다. 

|**필드**           |**설명**                                    |
|--------------------|---------------------------------------------------|
|`narrative`         |24시간 동안의 설명식 예보|
|`dow`               |요일|
|`wind_phrase`       |주간 12시간 동안의 풍향과 풍속을 기술하는 문구|
|`wdir_cardinal`     |기수 표기법의 주간 평균 풍향|
|`daypart_name`      |처음 48시간의 요일 이름이 포함되지 않은 주간 12시간의 이름|
|`temp_phrase`       |12시간 예보 기간 동안 예보된 고온 또는 저온이 포함된 짧은 문구|
|`shortcast`         |설명식 예보의 간결한 감각적 기상 부분|
|`long_daypart_name` |확장된 형식의 유효한 기상 예보에 대한 이름 지정된 시간 범위. 이름 지정된 시간 범위는 12시간 또는 24시간입니다.|
|`golf_category`     |골프 치기에 적절한 기상 상태의 문구로 표현된 골프 인덱스 카테고리|
|`phrase_nnchar`     |감각적 주간 기상 문구|
|`lunar_phrase`      |달 위상에 대한 3문자 단축 코드|
|`uv_desc`           |노출로 인한 피부 손상의 연관 위험 레벨을 제공하여 UV 인덱스 값을 보완하는 UV 인덱스 설명|
|`sky_cover`         | 하늘을 덮는 구름의 양에 대한 백분율을 기반으로 하는 설명식 구름의 양|
|`ptend_desc`        | 지난 3시간 동안의 기압 추세에 대한 설명식 텍스트|
*표 3. 변환된 응답 필드*

## API 응답의 널 또는 누락된 데이터 필드 처리
{: #handling_null_or_missing}

데이터를 사용할 수 없어서 데이터 필드가 널인 경우, Insights for Weather API는 "null" 단어로 적합한 필드 태그를 리턴하거나 전혀 필드를 리턴하지 않습니다. 

## 오류 처리
{: #handling_errors}

다음 오류 코드가 모든 API에 공통으로 적용됩니다. 

|**오류** |**설명**                                    |
|----------|---------------------------------------------------|
|400       |잘못된 요청. 잘못된 형식의 구문으로 인해 서버가 요청을 이해하지 못했습니다. 이 오류 코드는 모든 API에 대해 구현됩니다. API는 올바르지 않은 매개변수가 제공되는 경우 요청을 거부합니다.|
|401       |권한 없음. 요청에 인증이 필요합니다.|
|403       |금지됨. 서버가 요청을 이해하였으나 요청 수행을 거부하고 있습니다.|
|404       |찾을 수 없음. 필수 매개변수가 API 요청에 존재하지 않는 경우, 404 오류 코드의 MissingParameterException 오류가 리턴됩니다.|
|405       |허용되지 않는 메소드. 예를 들면, GET 대신 POST를 보내고 있습니다.|
|406       |허용할 수 없음. 예를 들면, gzip으로 압축된 응답은 허용되지 않습니다.|
|408       |요청 제한시간 초과. 클라이언트가 서버에서 대기하는 시간 내에 요청을 작성하지 않았습니다.|
|500       |내부 서버 오류. 서버에서 요청을 수행할 수 없게 하는 예상치 않은 조건이 발생했습니다.|
|502-504   |서비스 사용 불가능 또는 게이트웨이 문제. 이 오류 코드는 서비스가 임시로 사용 불가능한 경우 리턴됩니다.|
*표 4. 오류 응답 코드*

오류에 대한 응답은 항상 동일합니다. 하나의 응답에서 여러 개의 오류 코드를 리턴할 수 있습니다.
예를 들면, JSON 오류 응답은 다음과 같이 리턴될 수 있습니다.

```
{
  metadata: {
    transaction_id: "1411496413365:-1880721071"
  },
  success: false,
  errors: [
    {
      error: {
        code: "NDF-0001",
        message: "There was no data found for your product query."
      }
    }
}
```
